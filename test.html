<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script type="text/javascript">

      if (navigator.geolocation) {
        alert('Geolocation is supported!');
      }
      else {
        alert('Geolocation is not supported for this Browser/OS.');
      }

      function distance(lon1, lat1, lon2, lat2) {
        var R = 6371; // Radius of the earth in km
        var dLat = (lat2-lat1).toRad();  // Javascript functions in radians
        var dLon = (lon2-lon1).toRad();
        var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) *
                Math.sin(dLon/2) * Math.sin(dLon/2);
        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        var d = R * c; // Distance in km
        return d;
      }

      /** Converts numeric degrees to radians */
      if (typeof(Number.prototype.toRad) === "undefined") {
        Number.prototype.toRad = function() {
          return this * Math.PI / 180;
        }
      }

      navigator.geolocation.getCurrentPosition(pos => {
        console.log(pos);
        let lat = pos.coords.latitude;
        let lon = pos.coords.longitude;
        let coords = document.createElement("p");
        let text = document.createTextNode(lat + " " + lon + " | " + (Math.round(distance(pos.coords.longitude, pos.coords.latitude, 9.84, 52.62) * 100) / 100) + "km");
        coords.appendChild(text);

        document.body.appendChild(coords);

        alert(lat + " " + lon);

      })
);

function tryKeepScreenAlive(minutes) {
      const controller = new AbortController();
      const signal = controller.signal;

      WakeLock.request("screen", { signal });

      setTimeout(() => controller.abort(), minutes * 60 * 1000);

      console.log("halte den sceen am Leben")
    }

    tryKeepScreenAlive(10);

    </script>
  </body>
</html>
